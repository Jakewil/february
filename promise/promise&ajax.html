<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>封装</title>
</head>
<body>
<script>
    const p=new Promise((resolve,reject)=>{
        //创建对象
        const xhr=new XMLHttpRequest();
        //初始化
        xhr.open("GET",'https://api.apiopen.top/getJoke');
        //发送
        xhr.send();
        //绑定事件,处理响应结果
        xhr.onreadystatechange=function (){
            //判断
            if (xhr.readyState===4){
                //判断响应码
                if (xhr.status>=200&&xhr.status<300){
                    resolve(xhr.response);
                }else {
                    reject(xhr.status);
                }
            }
        }
    })
    //指定回调
    p.then(value => {
        console.log(value);
    },reason => {
        console.log(reason);
    })
</script>
</body>
</html>